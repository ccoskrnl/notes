import{u as N,g as se,h as te,i as U,j as le,k as ae,t as ie,l as re,m as D,n as w,p as ne,w as P,q as t,v as ue,R as M,x as oe,y as ce,z as me,A as pe,B as ye,C as ve,D as he,E as de,F as _e,G as ge,H as Ce,I as F,J as T,K as fe,L as H,M as Se}from"./app-C08GgaCK.js";const ke=["/","/Computer_Networks/SDN/main.html","/Miscellaneous/reading_list/reading_list.html","/Compiler/basics/lattice/constlat.html","/Compiler/basics/lattice/lattice_theory.html","/Compiler/basics/ssa/ssa.html","/Compiler/data_flow_analysis/intro/intro.html","/Compiler/data_flow_analysis/monotone/monotone_data_flow_analysis_frameworks.html","/Compiler/data_flow_analysis/reaching_definitions/reaching_definitions.html","/Compiler/symbolic_execution/sccp/sccp.html","/Computer_Security/software/reflective_dll/main.html","/Computer_Systems/smp/atomic/atomic.html","/Computer_Systems/storage/cache/cache.html","/Computer_Systems/storage/pcie_memory_acquisition/pcie_memory_acquistion.html","/Computer_Systems/uefi/edk2/main.html","/Operating_Systems/ntoskrnl/apc/apc.html","/Operating_Systems/ntoskrnl/driver/intro.html","/Operating_Systems/ntoskrnl/handle/handle.html","/Operating_Systems/ntoskrnl/object/object.html","/404.html","/Computer_Networks/SDN/","/Computer_Networks/","/Miscellaneous/reading_list/","/Miscellaneous/","/Compiler/basics/lattice/","/Compiler/basics/","/Compiler/","/Compiler/basics/ssa/","/Compiler/data_flow_analysis/intro/","/Compiler/data_flow_analysis/","/Compiler/data_flow_analysis/monotone/","/Compiler/data_flow_analysis/reaching_definitions/","/Compiler/symbolic_execution/sccp/","/Compiler/symbolic_execution/","/Computer_Security/software/reflective_dll/","/Computer_Security/software/","/Computer_Security/","/Computer_Systems/smp/atomic/","/Computer_Systems/smp/","/Computer_Systems/","/Computer_Systems/storage/cache/","/Computer_Systems/storage/","/Computer_Systems/storage/pcie_memory_acquisition/","/Computer_Systems/uefi/edk2/","/Computer_Systems/uefi/","/Operating_Systems/ntoskrnl/apc/","/Operating_Systems/ntoskrnl/","/Operating_Systems/","/Operating_Systems/ntoskrnl/driver/","/Operating_Systems/ntoskrnl/handle/","/Operating_Systems/ntoskrnl/object/","/category/","/tag/","/article/","/star/","/timeline/"],we="SLIMSEARCH_QUERY_HISTORY",d=N(we,[]),He=()=>{const{queryHistoryCount:l}=H,a=l>0;return{enabled:a,queryHistories:d,addQueryHistory:i=>{a&&(d.value=Array.from(new Set([i,...d.value.slice(0,l-1)])))},removeQueryHistory:i=>{d.value=[...d.value.slice(0,i),...d.value.slice(i+1)]}}},$=l=>ke[l.id]+("anchor"in l?`#${l.anchor}`:""),be="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=H,_=N(be,[]),Re=()=>{const l=I>0;return{enabled:l,resultHistories:_,addResultHistory:a=>{if(l){const i={link:$(a),display:a.display};"header"in a&&(i.header=a.header),_.value=[i,..._.value.slice(0,I-1)]}},removeResultHistory:a=>{_.value=[..._.value.slice(0,a),..._.value.slice(a+1)]}}},qe=l=>{const a=pe(),i=U(),b=ye(),n=D(0),C=w(()=>n.value>0),v=ve([]);return he(()=>{const{search:h,terminate:R}=de(),g=fe(o=>{const{resultsFilter:f=u=>u,querySplitter:j,suggestionsFilter:q,...x}=a.value;o?(n.value+=1,h(o,i.value,x).then(u=>f(u,o,i.value,b.value)).then(u=>{n.value-=1,v.value=u}).catch(u=>{console.warn(u),n.value-=1,n.value||(v.value=[])})):v.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});P([l,i],([o])=>{g(o.join(" "))},{immediate:!0}),_e(()=>{R()})}),{isSearching:C,results:v}};var Qe=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const i=te(),b=U(),n=le(ae),{enabled:C,addQueryHistory:v,queryHistories:h,removeQueryHistory:R}=He(),{enabled:g,resultHistories:o,addResultHistory:f,removeResultHistory:j}=Re(),q=C||g,x=ie(l,"queries"),{results:u,isSearching:Y}=qe(x),r=re({isQuery:!0,index:0}),p=D(0),y=D(0),A=w(()=>q&&(h.value.length>0||o.value.length>0)),Q=w(()=>u.value.length>0),L=w(()=>u.value[p.value]||null),B=()=>{const{isQuery:e,index:s}=r;s===0?(r.isQuery=!e,r.index=e?o.value.length-1:h.value.length-1):r.index=s-1},z=()=>{const{isQuery:e,index:s}=r;s===(e?h.value.length-1:o.value.length-1)?(r.isQuery=!e,r.index=0):r.index=s+1},G=()=>{p.value=p.value>0?p.value-1:u.value.length-1,y.value=L.value.contents.length-1},J=()=>{p.value=p.value<u.value.length-1?p.value+1:0,y.value=0},K=()=>{y.value<L.value.contents.length-1?y.value+=1:J()},V=()=>{y.value>0?y.value-=1:G()},O=e=>e.map(s=>Se(s)?s:t(s[0],s[1])),W=e=>{if(e.type==="customField"){const s=ge[e.index]||"$content",[c,k=""]=Ce(s)?s[b.value].split("$content"):s.split("$content");return e.display.map(m=>t("div",O([c,...m,k])))}return e.display.map(s=>t("div",O(s)))},S=()=>{p.value=0,y.value=0,a("updateQuery",""),a("close")},X=()=>C?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.queryHistory),h.value.map((e,s)=>t("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===s}],onClick:()=>{a("updateQuery",e)}},[t(F,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:c=>{c.preventDefault(),c.stopPropagation(),R(s)}})]))])):null,Z=()=>g?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.resultHistory),o.value.map((e,s)=>t(M,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===s}],onClick:()=>{S()}},()=>[t(F,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(c=>O(c)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:c=>{c.preventDefault(),c.stopPropagation(),j(s)}})]))])):null;return ne("keydown",e=>{if(l.isFocusing){if(Q.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=L.value.contents[y.value];v(l.queries.join(" ")),f(s),i.push($(s)),S()}}else if(g){if(e.key==="ArrowUp")B();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:s}=r;r.isQuery?(a("updateQuery",h.value[s]),e.preventDefault()):(i.push(o.value[s].link),S())}}}}),P([p,y],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!Q.value:!A.value}],id:"slimsearch-results"},l.queries.length?Y.value?t(ue,{hint:n.value.searching}):Q.value?t("ul",{class:"slimsearch-result-list"},u.value.map(({title:e,contents:s},c)=>{const k=p.value===c;return t("li",{class:["slimsearch-result-list-item",{active:k}]},[t("div",{class:"slimsearch-result-title"},e||n.value.defaultTitle),s.map((m,ee)=>{const E=k&&y.value===ee;return t(M,{to:$(m),class:["slimsearch-result-item",{active:E,"aria-selected":E}],onClick:()=>{v(l.queries.join(" ")),f(m),S()}},()=>[m.type==="text"?null:t(m.type==="title"?oe:m.type==="heading"?ce:me,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[m.type==="text"&&m.header?t("div",{class:"content-header"},m.header):null,t("div",W(m))])])})])})):n.value.emptyResult:q?A.value?[X(),Z()]:n.value.emptyHistory:n.value.emptyResult)}});export{Qe as default};
